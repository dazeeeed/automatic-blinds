   1               		.file	"twi.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__tmp_reg__ = 0
   6               	__zero_reg__ = 1
   7               		.text
   8               	.Ltext0:
   9               		.cfi_sections	.debug_frame
  10               	.global	I2C_init
  12               	I2C_init:
  13               	.LFB0:
  14               		.file 1 "twi.c"
   1:twi.c         **** #include "twi.h"
   2:twi.c         **** 
   3:twi.c         **** void I2C_init(void){
  15               		.loc 1 3 20 view -0
  16               		.cfi_startproc
  17               	/* prologue: function */
  18               	/* frame size = 0 */
  19               	/* stack size = 0 */
  20               	.L__stack_usage = 0
   4:twi.c         ****     TWBR = 72;  //72 for 16MHz gives 100kHz TWI SCLK
  21               		.loc 1 4 5 view .LVU1
  22               		.loc 1 4 10 is_stmt 0 view .LVU2
  23 0000 88E4      		ldi r24,lo8(72)
  24 0002 80B9      		out 0,r24
   5:twi.c         ****     TWSR &= ~((1<<TWPS0)|(1<<TWPS1));   // No prescaler
  25               		.loc 1 5 5 is_stmt 1 view .LVU3
  26               		.loc 1 5 10 is_stmt 0 view .LVU4
  27 0004 81B1      		in r24,0x1
  28 0006 8C7F      		andi r24,lo8(-4)
  29 0008 81B9      		out 0x1,r24
  30               	/* epilogue start */
   6:twi.c         **** }
  31               		.loc 1 6 1 view .LVU5
  32 000a 0895      		ret
  33               		.cfi_endproc
  34               	.LFE0:
  36               	.global	I2C_start
  38               	I2C_start:
  39               	.LFB1:
   7:twi.c         **** 
   8:twi.c         **** uint8_t I2C_start(void){
  40               		.loc 1 8 24 is_stmt 1 view -0
  41               		.cfi_startproc
  42               	/* prologue: function */
  43               	/* frame size = 0 */
  44               	/* stack size = 0 */
  45               	.L__stack_usage = 0
   9:twi.c         ****     TWCR = (1<<TWINT) | (1<<TWSTA) | (1<<TWEN);
  46               		.loc 1 9 5 view .LVU7
  47               		.loc 1 9 10 is_stmt 0 view .LVU8
  48 000c 84EA      		ldi r24,lo8(-92)
  49 000e 86BF      		out 0x36,r24
  10:twi.c         ****     while(!(TWCR & (1<<TWINT)));
  50               		.loc 1 10 5 is_stmt 1 view .LVU9
  51               	.L3:
  52               		.loc 1 10 32 discriminator 1 view .LVU10
  53               		.loc 1 10 10 discriminator 1 view .LVU11
  54 0010 06B6      		in __tmp_reg__,0x36
  55 0012 07FE      		sbrs __tmp_reg__,7
  56 0014 00C0      		rjmp .L3
  11:twi.c         ****     return (TWSR & 0xf8);
  57               		.loc 1 11 5 view .LVU12
  58               		.loc 1 11 18 is_stmt 0 view .LVU13
  59 0016 81B1      		in r24,0x1
  12:twi.c         **** }
  60               		.loc 1 12 1 view .LVU14
  61 0018 887F      		andi r24,lo8(-8)
  62               	/* epilogue start */
  63 001a 0895      		ret
  64               		.cfi_endproc
  65               	.LFE1:
  67               	.global	I2C_stop
  69               	I2C_stop:
  70               	.LFB2:
  13:twi.c         **** 
  14:twi.c         **** void I2C_stop(void){
  71               		.loc 1 14 20 is_stmt 1 view -0
  72               		.cfi_startproc
  73               	/* prologue: function */
  74               	/* frame size = 0 */
  75               	/* stack size = 0 */
  76               	.L__stack_usage = 0
  15:twi.c         ****     TWCR = (1<<TWINT) | (1<<TWSTO) | (1<<TWEN);
  77               		.loc 1 15 5 view .LVU16
  78               		.loc 1 15 10 is_stmt 0 view .LVU17
  79 001c 84E9      		ldi r24,lo8(-108)
  80 001e 86BF      		out 0x36,r24
  16:twi.c         ****     while(!(TWCR & (1<<TWSTO)));
  81               		.loc 1 16 5 is_stmt 1 view .LVU18
  82               	.L6:
  83               		.loc 1 16 32 discriminator 1 view .LVU19
  84               		.loc 1 16 10 discriminator 1 view .LVU20
  85 0020 06B6      		in __tmp_reg__,0x36
  86 0022 04FE      		sbrs __tmp_reg__,4
  87 0024 00C0      		rjmp .L6
  88               	/* epilogue start */
  17:twi.c         **** }
  89               		.loc 1 17 1 is_stmt 0 view .LVU21
  90 0026 0895      		ret
  91               		.cfi_endproc
  92               	.LFE2:
  94               	.global	I2C_write
  96               	I2C_write:
  97               	.LVL0:
  98               	.LFB3:
  18:twi.c         **** 
  19:twi.c         **** uint8_t I2C_write(uint8_t byte){
  99               		.loc 1 19 32 is_stmt 1 view -0
 100               		.cfi_startproc
 101               	/* prologue: function */
 102               	/* frame size = 0 */
 103               	/* stack size = 0 */
 104               	.L__stack_usage = 0
  20:twi.c         ****     TWDR = byte;
 105               		.loc 1 20 5 view .LVU23
 106               		.loc 1 20 10 is_stmt 0 view .LVU24
 107 0028 83B9      		out 0x3,r24
  21:twi.c         ****     TWCR = (1<<TWINT) | (1<<TWEN);
 108               		.loc 1 21 5 is_stmt 1 view .LVU25
 109               		.loc 1 21 10 is_stmt 0 view .LVU26
 110 002a 84E8      		ldi r24,lo8(-124)
 111               	.LVL1:
 112               		.loc 1 21 10 view .LVU27
 113 002c 86BF      		out 0x36,r24
 114               	.LVL2:
  22:twi.c         ****     while(!(TWCR & (1<<TWINT)));
 115               		.loc 1 22 5 is_stmt 1 view .LVU28
 116               	.L10:
 117               		.loc 1 22 32 discriminator 1 view .LVU29
 118               		.loc 1 22 10 discriminator 1 view .LVU30
 119 002e 06B6      		in __tmp_reg__,0x36
 120 0030 07FE      		sbrs __tmp_reg__,7
 121 0032 00C0      		rjmp .L10
  23:twi.c         ****     return (TWSR & 0xf8);
 122               		.loc 1 23 5 view .LVU31
 123               		.loc 1 23 18 is_stmt 0 view .LVU32
 124 0034 81B1      		in r24,0x1
  24:twi.c         **** }
 125               		.loc 1 24 1 view .LVU33
 126 0036 887F      		andi r24,lo8(-8)
 127               	/* epilogue start */
 128 0038 0895      		ret
 129               		.cfi_endproc
 130               	.LFE3:
 132               	.global	I2C_read
 134               	I2C_read:
 135               	.LVL3:
 136               	.LFB4:
  25:twi.c         **** 
  26:twi.c         **** uint8_t I2C_read(uint8_t *value, uint8_t ack){
 137               		.loc 1 26 46 is_stmt 1 view -0
 138               		.cfi_startproc
 139               	/* prologue: function */
 140               	/* frame size = 0 */
 141               	/* stack size = 0 */
 142               	.L__stack_usage = 0
 143               		.loc 1 26 46 is_stmt 0 view .LVU35
 144 003a FC01      		movw r30,r24
  27:twi.c         ****     TWCR = (1<<TWINT) | (1<<TWEN) | (ack<<TWEA);
 145               		.loc 1 27 5 is_stmt 1 view .LVU36
 146               		.loc 1 27 41 is_stmt 0 view .LVU37
 147 003c 80E4      		ldi r24,lo8(64)
 148               	.LVL4:
 149               		.loc 1 27 41 view .LVU38
 150 003e 689F      		mul r22,r24
 151 0040 B001      		movw r22,r0
 152 0042 1124      		clr __zero_reg__
 153               	.LVL5:
 154               		.loc 1 27 35 view .LVU39
 155 0044 6468      		ori r22,lo8(-124)
 156               		.loc 1 27 10 view .LVU40
 157 0046 66BF      		out 0x36,r22
  28:twi.c         ****     while(!(TWCR & (1<<TWINT)));
 158               		.loc 1 28 5 is_stmt 1 view .LVU41
 159               	.L13:
 160               		.loc 1 28 32 discriminator 1 view .LVU42
 161               		.loc 1 28 10 discriminator 1 view .LVU43
 162 0048 06B6      		in __tmp_reg__,0x36
 163 004a 07FE      		sbrs __tmp_reg__,7
 164 004c 00C0      		rjmp .L13
  29:twi.c         ****     *value = TWDR;
 165               		.loc 1 29 5 view .LVU44
 166               		.loc 1 29 14 is_stmt 0 view .LVU45
 167 004e 83B1      		in r24,0x3
 168               		.loc 1 29 12 view .LVU46
 169 0050 8083      		st Z,r24
  30:twi.c         ****     return (TWSR & 0xf8);
 170               		.loc 1 30 5 is_stmt 1 view .LVU47
 171               		.loc 1 30 18 is_stmt 0 view .LVU48
 172 0052 81B1      		in r24,0x1
  31:twi.c         **** }...
 173               		.loc 1 31 1 view .LVU49
 174 0054 887F      		andi r24,lo8(-8)
 175               	/* epilogue start */
 176 0056 0895      		ret
 177               		.cfi_endproc
 178               	.LFE4:
 180               	.Letext0:
 181               		.file 2 "e:\\avr-gcc-10.1.0-x64-windows\\avr\\include\\stdint.h"
DEFINED SYMBOLS
                            *ABS*:0000000000000000 twi.c
C:\Users\KRZYSZ~1\AppData\Local\Temp\ccxcOuOd.s:2      *ABS*:000000000000003e __SP_H__
C:\Users\KRZYSZ~1\AppData\Local\Temp\ccxcOuOd.s:3      *ABS*:000000000000003d __SP_L__
C:\Users\KRZYSZ~1\AppData\Local\Temp\ccxcOuOd.s:4      *ABS*:000000000000003f __SREG__
C:\Users\KRZYSZ~1\AppData\Local\Temp\ccxcOuOd.s:5      *ABS*:0000000000000000 __tmp_reg__
C:\Users\KRZYSZ~1\AppData\Local\Temp\ccxcOuOd.s:6      *ABS*:0000000000000001 __zero_reg__
C:\Users\KRZYSZ~1\AppData\Local\Temp\ccxcOuOd.s:12     .text:0000000000000000 I2C_init
C:\Users\KRZYSZ~1\AppData\Local\Temp\ccxcOuOd.s:38     .text:000000000000000c I2C_start
C:\Users\KRZYSZ~1\AppData\Local\Temp\ccxcOuOd.s:69     .text:000000000000001c I2C_stop
C:\Users\KRZYSZ~1\AppData\Local\Temp\ccxcOuOd.s:96     .text:0000000000000028 I2C_write
C:\Users\KRZYSZ~1\AppData\Local\Temp\ccxcOuOd.s:134    .text:000000000000003a I2C_read

NO UNDEFINED SYMBOLS
