   1               		.file	"rtc.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__tmp_reg__ = 0
   6               	__zero_reg__ = 1
   7               		.text
   8               	.Ltext0:
   9               		.cfi_sections	.debug_frame
  10               	.global	rtc_init
  12               	rtc_init:
  13               	.LFB0:
  14               		.file 1 "rtc.c"
   1:rtc.c         **** #include "rtc.h"
   2:rtc.c         **** 
   3:rtc.c         **** void rtc_init(void){
  15               		.loc 1 3 20 view -0
  16               		.cfi_startproc
  17               	/* prologue: function */
  18               	/* frame size = 0 */
  19               	/* stack size = 0 */
  20               	.L__stack_usage = 0
   4:rtc.c         ****     I2C_start();
  21               		.loc 1 4 5 view .LVU1
  22 0000 0E94 0000 		call I2C_start
  23               	.LVL0:
   5:rtc.c         ****     I2C_write(RTC_ADDR_W); //Enable 1 second pulses
  24               		.loc 1 5 5 view .LVU2
  25 0004 82EA      		ldi r24,lo8(-94)
  26 0006 0E94 0000 		call I2C_write
  27               	.LVL1:
   6:rtc.c         ****     I2C_write(RTC_CLKOUT_CTRL); // 0x0d
  28               		.loc 1 6 5 view .LVU3
  29 000a 8DE0      		ldi r24,lo8(13)
  30 000c 0E94 0000 		call I2C_write
  31               	.LVL2:
   7:rtc.c         ****     I2C_write( (1<<RTC_CLKOUT_BIT)|(1<<RTC_CLKOUT_FD0_BIT)|(1<<RTC_CLKOUT_FD1_BIT));
  32               		.loc 1 7 5 view .LVU4
  33 0010 83E8      		ldi r24,lo8(-125)
  34 0012 0E94 0000 		call I2C_write
  35               	.LVL3:
   8:rtc.c         ****     I2C_stop(); // (1<<7) | (1<<1) | (1<<0)
  36               		.loc 1 8 5 view .LVU5
  37 0016 0C94 0000 		jmp I2C_stop
  38               	.LVL4:
  39               		.cfi_endproc
  40               	.LFE0:
  42               	.global	rtc_set_date_time
  44               	rtc_set_date_time:
  45               	.LVL5:
  46               	.LFB1:
   9:rtc.c         **** }
  10:rtc.c         **** 
  11:rtc.c         **** void rtc_set_date_time(struct datetime *dt){
  47               		.loc 1 11 44 view -0
  48               		.cfi_startproc
  49               		.loc 1 11 44 is_stmt 0 view .LVU7
  50 001a 1F93      		push r17
  51               	.LCFI0:
  52               		.cfi_def_cfa_offset 3
  53               		.cfi_offset 17, -2
  54 001c CF93      		push r28
  55               	.LCFI1:
  56               		.cfi_def_cfa_offset 4
  57               		.cfi_offset 28, -3
  58 001e DF93      		push r29
  59               	.LCFI2:
  60               		.cfi_def_cfa_offset 5
  61               		.cfi_offset 29, -4
  62               	/* prologue: function */
  63               	/* frame size = 0 */
  64               	/* stack size = 3 */
  65               	.L__stack_usage = 3
  66 0020 EC01      		movw r28,r24
  12:rtc.c         ****     I2C_start();
  67               		.loc 1 12 5 is_stmt 1 view .LVU8
  68 0022 0E94 0000 		call I2C_start
  69               	.LVL6:
  13:rtc.c         ****     I2C_write(RTC_ADDR_W);
  70               		.loc 1 13 5 view .LVU9
  71 0026 82EA      		ldi r24,lo8(-94)
  72 0028 0E94 0000 		call I2C_write
  73               	.LVL7:
  14:rtc.c         ****     I2C_write(RTC_SECOND);
  74               		.loc 1 14 5 view .LVU10
  75 002c 82E0      		ldi r24,lo8(2)
  76 002e 0E94 0000 		call I2C_write
  77               	.LVL8:
  15:rtc.c         ****     I2C_write(dec2bcd(dt->sec));
  78               		.loc 1 15 5 view .LVU11
  79               		.loc 1 15 15 is_stmt 0 view .LVU12
  80 0032 8A81      		ldd r24,Y+2
  81 0034 1AE0      		ldi r17,lo8(10)
  82 0036 612F      		mov r22,r17
  83 0038 0E94 0000 		call __udivmodqi4
  84 003c 8295      		swap r24
  85 003e 807F      		andi r24,lo8(-16)
  86               		.loc 1 15 5 view .LVU13
  87 0040 890F      		add r24,r25
  88 0042 0E94 0000 		call I2C_write
  89               	.LVL9:
  16:rtc.c         ****     I2C_write(dec2bcd(dt->min));
  90               		.loc 1 16 5 is_stmt 1 view .LVU14
  91               		.loc 1 16 15 is_stmt 0 view .LVU15
  92 0046 8981      		ldd r24,Y+1
  93 0048 612F      		mov r22,r17
  94 004a 0E94 0000 		call __udivmodqi4
  95 004e 8295      		swap r24
  96 0050 807F      		andi r24,lo8(-16)
  97               		.loc 1 16 5 view .LVU16
  98 0052 890F      		add r24,r25
  99 0054 0E94 0000 		call I2C_write
 100               	.LVL10:
  17:rtc.c         ****     I2C_write(dec2bcd(dt->hour));
 101               		.loc 1 17 5 is_stmt 1 view .LVU17
 102               		.loc 1 17 15 is_stmt 0 view .LVU18
 103 0058 8881      		ld r24,Y
 104 005a 612F      		mov r22,r17
 105 005c 0E94 0000 		call __udivmodqi4
 106 0060 8295      		swap r24
 107 0062 807F      		andi r24,lo8(-16)
 108               		.loc 1 17 5 view .LVU19
 109 0064 890F      		add r24,r25
 110 0066 0E94 0000 		call I2C_write
 111               	.LVL11:
  18:rtc.c         ****     I2C_write(dec2bcd(dt->day));
 112               		.loc 1 18 5 is_stmt 1 view .LVU20
 113               		.loc 1 18 15 is_stmt 0 view .LVU21
 114 006a 8B81      		ldd r24,Y+3
 115 006c 612F      		mov r22,r17
 116 006e 0E94 0000 		call __udivmodqi4
 117 0072 8295      		swap r24
 118 0074 807F      		andi r24,lo8(-16)
 119               		.loc 1 18 5 view .LVU22
 120 0076 890F      		add r24,r25
 121 0078 0E94 0000 		call I2C_write
 122               	.LVL12:
  19:rtc.c         ****     I2C_write(dec2bcd(dt->weekday));
 123               		.loc 1 19 5 is_stmt 1 view .LVU23
 124               		.loc 1 19 15 is_stmt 0 view .LVU24
 125 007c 8C81      		ldd r24,Y+4
 126 007e 612F      		mov r22,r17
 127 0080 0E94 0000 		call __udivmodqi4
 128 0084 8295      		swap r24
 129 0086 807F      		andi r24,lo8(-16)
 130               		.loc 1 19 5 view .LVU25
 131 0088 890F      		add r24,r25
 132 008a 0E94 0000 		call I2C_write
 133               	.LVL13:
  20:rtc.c         ****     I2C_write(dec2bcd(dt->month));
 134               		.loc 1 20 5 is_stmt 1 view .LVU26
 135               		.loc 1 20 15 is_stmt 0 view .LVU27
 136 008e 8D81      		ldd r24,Y+5
 137 0090 612F      		mov r22,r17
 138 0092 0E94 0000 		call __udivmodqi4
 139 0096 8295      		swap r24
 140 0098 807F      		andi r24,lo8(-16)
 141               		.loc 1 20 5 view .LVU28
 142 009a 890F      		add r24,r25
 143 009c 0E94 0000 		call I2C_write
 144               	.LVL14:
  21:rtc.c         ****     I2C_write(dec2bcd(dt->year));
 145               		.loc 1 21 5 is_stmt 1 view .LVU29
 146               		.loc 1 21 15 is_stmt 0 view .LVU30
 147 00a0 8E81      		ldd r24,Y+6
 148 00a2 612F      		mov r22,r17
 149 00a4 0E94 0000 		call __udivmodqi4
 150 00a8 8295      		swap r24
 151 00aa 807F      		andi r24,lo8(-16)
 152               		.loc 1 21 5 view .LVU31
 153 00ac 890F      		add r24,r25
 154 00ae 0E94 0000 		call I2C_write
 155               	.LVL15:
  22:rtc.c         ****     I2C_stop();
 156               		.loc 1 22 5 is_stmt 1 view .LVU32
 157               	/* epilogue start */
  23:rtc.c         **** }
 158               		.loc 1 23 1 is_stmt 0 view .LVU33
 159 00b2 DF91      		pop r29
 160 00b4 CF91      		pop r28
 161               	.LVL16:
 162               		.loc 1 23 1 view .LVU34
 163 00b6 1F91      		pop r17
  22:rtc.c         ****     I2C_stop();
 164               		.loc 1 22 5 view .LVU35
 165 00b8 0C94 0000 		jmp I2C_stop
 166               	.LVL17:
 167               		.cfi_endproc
 168               	.LFE1:
 170               	.global	rtc_get_date_time
 172               	rtc_get_date_time:
 173               	.LVL18:
 174               	.LFB2:
  24:rtc.c         **** 
  25:rtc.c         **** void rtc_get_date_time(struct datetime *dt){
 175               		.loc 1 25 44 is_stmt 1 view -0
 176               		.cfi_startproc
 177               		.loc 1 25 44 is_stmt 0 view .LVU37
 178 00bc FF92      		push r15
 179               	.LCFI3:
 180               		.cfi_def_cfa_offset 3
 181               		.cfi_offset 15, -2
 182 00be 0F93      		push r16
 183               	.LCFI4:
 184               		.cfi_def_cfa_offset 4
 185               		.cfi_offset 16, -3
 186 00c0 1F93      		push r17
 187               	.LCFI5:
 188               		.cfi_def_cfa_offset 5
 189               		.cfi_offset 17, -4
 190 00c2 CF93      		push r28
 191               	.LCFI6:
 192               		.cfi_def_cfa_offset 6
 193               		.cfi_offset 28, -5
 194 00c4 DF93      		push r29
 195               	.LCFI7:
 196               		.cfi_def_cfa_offset 7
 197               		.cfi_offset 29, -6
 198 00c6 0F92      		push __tmp_reg__
 199               	.LCFI8:
 200               		.cfi_def_cfa_offset 8
 201 00c8 CDB7      		in r28,__SP_L__
 202 00ca DEB7      		in r29,__SP_H__
 203               	.LCFI9:
 204               		.cfi_def_cfa_register 28
 205               	/* prologue: function */
 206               	/* frame size = 1 */
 207               	/* stack size = 6 */
 208               	.L__stack_usage = 6
 209 00cc 8C01      		movw r16,r24
  26:rtc.c         ****     uint8_t v;
 210               		.loc 1 26 5 is_stmt 1 view .LVU38
  27:rtc.c         ****     I2C_start();
 211               		.loc 1 27 5 view .LVU39
 212 00ce 0E94 0000 		call I2C_start
 213               	.LVL19:
  28:rtc.c         ****     I2C_write(RTC_ADDR_W);
 214               		.loc 1 28 5 view .LVU40
 215 00d2 82EA      		ldi r24,lo8(-94)
 216 00d4 0E94 0000 		call I2C_write
 217               	.LVL20:
  29:rtc.c         ****     I2C_write(RTC_SECOND);
 218               		.loc 1 29 5 view .LVU41
 219 00d8 82E0      		ldi r24,lo8(2)
 220 00da 0E94 0000 		call I2C_write
 221               	.LVL21:
  30:rtc.c         ****     I2C_start();
 222               		.loc 1 30 5 view .LVU42
 223 00de 0E94 0000 		call I2C_start
 224               	.LVL22:
  31:rtc.c         ****     I2C_write(RTC_ADDR_R);
 225               		.loc 1 31 5 view .LVU43
 226 00e2 83EA      		ldi r24,lo8(-93)
 227 00e4 0E94 0000 		call I2C_write
 228               	.LVL23:
  32:rtc.c         ****     I2C_read(&v, ACK);
 229               		.loc 1 32 5 view .LVU44
 230 00e8 61E0      		ldi r22,lo8(1)
 231 00ea CE01      		movw r24,r28
 232 00ec 0196      		adiw r24,1
 233 00ee 0E94 0000 		call I2C_read
 234               	.LVL24:
  33:rtc.c         ****     dt->sec = bcd2dec(v &       0b01111111);
 235               		.loc 1 33 5 view .LVU45
 236               		.loc 1 33 15 is_stmt 0 view .LVU46
 237 00f2 8981      		ldd r24,Y+1
 238 00f4 282F      		mov r18,r24
 239 00f6 30E0      		ldi r19,0
 240 00f8 94E0      		ldi r25,4
 241               		1:
 242 00fa 3595      		asr r19
 243 00fc 2795      		ror r18
 244 00fe 9A95      		dec r25
 245 0100 01F4      		brne 1b
 246 0102 2770      		andi r18,lo8(7)
 247 0104 3AE0      		ldi r19,lo8(10)
 248 0106 F32E      		mov r15,r19
 249 0108 8F70      		andi r24,lo8(15)
 250 010a 2F9D      		mul r18,r15
 251 010c 800D      		add r24,r0
 252 010e 1124      		clr __zero_reg__
 253               		.loc 1 33 13 view .LVU47
 254 0110 F801      		movw r30,r16
 255 0112 8283      		std Z+2,r24
  34:rtc.c         ****     I2C_read(&v, ACK);
 256               		.loc 1 34 5 is_stmt 1 view .LVU48
 257 0114 61E0      		ldi r22,lo8(1)
 258 0116 CE01      		movw r24,r28
 259 0118 0196      		adiw r24,1
 260 011a 0E94 0000 		call I2C_read
 261               	.LVL25:
  35:rtc.c         ****     dt->min = bcd2dec(v &       0b01111111);
 262               		.loc 1 35 5 view .LVU49
 263               		.loc 1 35 15 is_stmt 0 view .LVU50
 264 011e 8981      		ldd r24,Y+1
 265 0120 282F      		mov r18,r24
 266 0122 30E0      		ldi r19,0
 267 0124 44E0      		ldi r20,4
 268               		1:
 269 0126 3595      		asr r19
 270 0128 2795      		ror r18
 271 012a 4A95      		dec r20
 272 012c 01F4      		brne 1b
 273 012e 2770      		andi r18,lo8(7)
 274 0130 8F70      		andi r24,lo8(15)
 275 0132 2F9D      		mul r18,r15
 276 0134 800D      		add r24,r0
 277 0136 1124      		clr __zero_reg__
 278               		.loc 1 35 13 view .LVU51
 279 0138 F801      		movw r30,r16
 280 013a 8183      		std Z+1,r24
  36:rtc.c         ****     I2C_read(&v, ACK);
 281               		.loc 1 36 5 is_stmt 1 view .LVU52
 282 013c 61E0      		ldi r22,lo8(1)
 283 013e CE01      		movw r24,r28
 284 0140 0196      		adiw r24,1
 285 0142 0E94 0000 		call I2C_read
 286               	.LVL26:
  37:rtc.c         ****     dt->hour = bcd2dec(v &      0b00111111);
 287               		.loc 1 37 5 view .LVU53
 288               		.loc 1 37 16 is_stmt 0 view .LVU54
 289 0146 8981      		ldd r24,Y+1
 290 0148 282F      		mov r18,r24
 291 014a 30E0      		ldi r19,0
 292 014c 54E0      		ldi r21,4
 293               		1:
 294 014e 3595      		asr r19
 295 0150 2795      		ror r18
 296 0152 5A95      		dec r21
 297 0154 01F4      		brne 1b
 298 0156 2370      		andi r18,lo8(3)
 299 0158 8F70      		andi r24,lo8(15)
 300 015a 2F9D      		mul r18,r15
 301 015c 800D      		add r24,r0
 302 015e 1124      		clr __zero_reg__
 303               		.loc 1 37 14 view .LVU55
 304 0160 F801      		movw r30,r16
 305 0162 8083      		st Z,r24
  38:rtc.c         ****     I2C_read(&v, ACK);
 306               		.loc 1 38 5 is_stmt 1 view .LVU56
 307 0164 61E0      		ldi r22,lo8(1)
 308 0166 CE01      		movw r24,r28
 309 0168 0196      		adiw r24,1
 310 016a 0E94 0000 		call I2C_read
 311               	.LVL27:
  39:rtc.c         ****     dt->day = bcd2dec(v &       0b00111111);
 312               		.loc 1 39 5 view .LVU57
 313               		.loc 1 39 15 is_stmt 0 view .LVU58
 314 016e 8981      		ldd r24,Y+1
 315 0170 282F      		mov r18,r24
 316 0172 30E0      		ldi r19,0
 317 0174 64E0      		ldi r22,4
 318               		1:
 319 0176 3595      		asr r19
 320 0178 2795      		ror r18
 321 017a 6A95      		dec r22
 322 017c 01F4      		brne 1b
 323 017e 2370      		andi r18,lo8(3)
 324 0180 8F70      		andi r24,lo8(15)
 325 0182 2F9D      		mul r18,r15
 326 0184 800D      		add r24,r0
 327 0186 1124      		clr __zero_reg__
 328               		.loc 1 39 13 view .LVU59
 329 0188 F801      		movw r30,r16
 330 018a 8383      		std Z+3,r24
  40:rtc.c         ****     I2C_read(&v, ACK);
 331               		.loc 1 40 5 is_stmt 1 view .LVU60
 332 018c 61E0      		ldi r22,lo8(1)
 333 018e CE01      		movw r24,r28
 334 0190 0196      		adiw r24,1
 335 0192 0E94 0000 		call I2C_read
 336               	.LVL28:
  41:rtc.c         ****     dt->weekday = bcd2dec(v &   0b00000111);
 337               		.loc 1 41 5 view .LVU61
 338               		.loc 1 41 19 is_stmt 0 view .LVU62
 339 0196 8981      		ldd r24,Y+1
 340 0198 8770      		andi r24,lo8(7)
 341               		.loc 1 41 17 view .LVU63
 342 019a F801      		movw r30,r16
 343 019c 8483      		std Z+4,r24
  42:rtc.c         ****     I2C_read(&v, ACK);
 344               		.loc 1 42 5 is_stmt 1 view .LVU64
 345 019e 61E0      		ldi r22,lo8(1)
 346 01a0 CE01      		movw r24,r28
 347 01a2 0196      		adiw r24,1
 348 01a4 0E94 0000 		call I2C_read
 349               	.LVL29:
  43:rtc.c         ****     dt->month = bcd2dec(v &     0b00011111);
 350               		.loc 1 43 5 view .LVU65
 351               		.loc 1 43 17 is_stmt 0 view .LVU66
 352 01a8 8981      		ldd r24,Y+1
 353 01aa 84FB      		bst r24,4
 354 01ac 9927      		clr r25
 355 01ae 90F9      		bld r25,0
 356 01b0 8F70      		andi r24,lo8(15)
 357 01b2 F99E      		mul r15,r25
 358 01b4 800D      		add r24,r0
 359 01b6 1124      		clr __zero_reg__
 360               		.loc 1 43 15 view .LVU67
 361 01b8 F801      		movw r30,r16
 362 01ba 8583      		std Z+5,r24
  44:rtc.c         ****     I2C_read(&v, NO_ACK);
 363               		.loc 1 44 5 is_stmt 1 view .LVU68
 364 01bc 60E0      		ldi r22,0
 365 01be CE01      		movw r24,r28
 366 01c0 0196      		adiw r24,1
 367 01c2 0E94 0000 		call I2C_read
 368               	.LVL30:
  45:rtc.c         ****     dt->year = bcd2dec(v);
 369               		.loc 1 45 5 view .LVU69
 370               		.loc 1 45 16 is_stmt 0 view .LVU70
 371 01c6 8981      		ldd r24,Y+1
 372 01c8 982F      		mov r25,r24
 373 01ca 9295      		swap r25
 374 01cc 9F70      		andi r25,lo8(15)
 375 01ce 8F70      		andi r24,lo8(15)
 376 01d0 9F9D      		mul r25,r15
 377 01d2 800D      		add r24,r0
 378 01d4 1124      		clr __zero_reg__
 379               		.loc 1 45 14 view .LVU71
 380 01d6 F801      		movw r30,r16
 381 01d8 8683      		std Z+6,r24
  46:rtc.c         ****     I2C_stop();
 382               		.loc 1 46 5 is_stmt 1 view .LVU72
 383 01da 0E94 0000 		call I2C_stop
 384               	.LVL31:
 385               	/* epilogue start */
  47:rtc.c         **** }...
 386               		.loc 1 47 1 is_stmt 0 view .LVU73
 387 01de 0F90      		pop __tmp_reg__
 388 01e0 DF91      		pop r29
 389 01e2 CF91      		pop r28
 390 01e4 1F91      		pop r17
 391 01e6 0F91      		pop r16
 392               	.LVL32:
 393               		.loc 1 47 1 view .LVU74
 394 01e8 FF90      		pop r15
 395 01ea 0895      		ret
 396               		.cfi_endproc
 397               	.LFE2:
 399               	.Letext0:
 400               		.file 2 "rtc.h"
 401               		.file 3 "twi.h"
 402               		.file 4 "e:\\avr-gcc-10.1.0-x64-windows\\avr\\include\\stdint.h"
DEFINED SYMBOLS
                            *ABS*:0000000000000000 rtc.c
C:\Users\KRZYSZ~1\AppData\Local\Temp\cchKXUir.s:2      *ABS*:000000000000003e __SP_H__
C:\Users\KRZYSZ~1\AppData\Local\Temp\cchKXUir.s:3      *ABS*:000000000000003d __SP_L__
C:\Users\KRZYSZ~1\AppData\Local\Temp\cchKXUir.s:4      *ABS*:000000000000003f __SREG__
C:\Users\KRZYSZ~1\AppData\Local\Temp\cchKXUir.s:5      *ABS*:0000000000000000 __tmp_reg__
C:\Users\KRZYSZ~1\AppData\Local\Temp\cchKXUir.s:6      *ABS*:0000000000000001 __zero_reg__
C:\Users\KRZYSZ~1\AppData\Local\Temp\cchKXUir.s:12     .text:0000000000000000 rtc_init
C:\Users\KRZYSZ~1\AppData\Local\Temp\cchKXUir.s:44     .text:000000000000001a rtc_set_date_time
C:\Users\KRZYSZ~1\AppData\Local\Temp\cchKXUir.s:172    .text:00000000000000bc rtc_get_date_time

UNDEFINED SYMBOLS
I2C_start
I2C_write
I2C_stop
__udivmodqi4
I2C_read
